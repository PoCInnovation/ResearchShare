version: '3'

services:
  app:
    build: .
    ports:
      - 3000:3000
    networks:
      - rpc-tier
    restart: unless-stopped
  
  ganache:
    image: trufflesuite/ganache-cli:v6.12.1
    command: "ganash-cli --db /app/db --chainId 1337"
    volumes:
      - ganache-db:/app/db
    ports: 
      - 8545:8545
    networks:
      - rpc-tier
    restart: unless-stopped

networks:
    rpc-tier:
      driver: bridge

volumes:
  ganache-db: